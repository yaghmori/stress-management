# سیستم مدیریت استرس و آموزش آرام‌سازی

یک برنامه دسکتاپ Python کامل و آماده تولید با استفاده از PySide6 (Qt for Python) با پشتیبانی کامل UI فارسی RTL.

## ویژگی‌ها

- **UI فارسی RTL کامل**: چیدمان راست‌به‌چپ کامل با متن فارسی که از ترجمه‌های JSON بارگذاری می‌شود
- **سیستم ترجمه**: تمام متون UI در فایل‌های JSON ذخیره می‌شوند - هیچ کاراکتر فارسی در کد منبع Python وجود ندارد
- **نقش‌های کاربر و ادمین**: رابط‌های جداگانه برای کاربران عادی و مدیران
- **ثبت استرس**: ردیابی روزانه سطح استرس با یادداشت‌ها، ساعت خواب و فعالیت بدنی
- **مدیریت تمرین**: تمرینات تنفسی، مدیتیشن، آرام‌سازی هدایت شده و موسیقی درمانی
- **ردیابی جلسات**: ردیابی جلسات تمرین تکمیل شده
- **تست اضطراب**: ارزیابی اضطراب به سبک GAD-7 (7 سؤال، امتیاز 0-21)
- **گزارش‌ها و خروجی**: خروجی گزارش‌های استرس به فرمت CSV
- **پنل مدیریت**: عملیات CRUD کامل برای کاربران، تمرینات و سوالات اضطراب
- **مدیریت پایگاه داده**: عملکرد پشتیبان‌گیری، بازیابی و خروجی پایگاه داده

## معماری

این برنامه از یک معماری لایه‌ای تمیز پیروی می‌کند:

```
/app
  /ui              # لایه UI (ویجت‌های PySide6)
  /services        # لایه منطق تجاری
  /data            # لایه دسترسی به داده (SQLite + Repositories)
  /config          # پیکربندی (Translation Manager, Config)
/translations      # فایل‌های ترجمه JSON
main.py            # نقطه ورود برنامه کاربر
admin_main.py      # نقطه ورود برنامه ادمین
```

## سیستم ترجمه

تمام متون UI در `/translations/fa.json` ذخیره می‌شوند. برنامه از کلاس `TranslationManager` برای بارگذاری و بازیابی رشته‌های ترجمه شده استفاده می‌کند.

**ویژگی‌های کلیدی:**

- تمام متن فارسی فقط در فایل‌های JSON
- صفر کاراکتر فارسی در کد منبع Python
- پشتیبانی آسان از تعویض زبان
- جستجوی کلید ترجمه با امنیت نوع

**استفاده در کد:**

```python
from app.config.translation_manager import TranslationManager

tm = TranslationManager()
label.setText(tm.t("login"))  # متن فارسی را از JSON برمی‌گرداند
```

## نصب

1. **نصب وابستگی‌ها:**

   ```bash
   pip install -r requirements.txt
   ```

2. **اجرای برنامه کاربر:**

   ```bash
   python main.py
   ```

3. **اجرای پنل مدیریت:**
   ```bash
   python admin_main.py
   ```

## اعتبارنامه‌های پیش‌فرض

**حساب ادمین:**

- نام کاربری: `admin`
- رمز عبور: `admin123`

_توجه: برای امنیت، رمز عبور پیش‌فرض ادمین را پس از اولین ورود تغییر دهید._

## پایگاه داده

این برنامه از پایگاه داده SQLite استفاده می‌کند که در `/data/stress_management.db` ذخیره می‌شود. طرح پایگاه داده به صورت خودکار در اولین اجرا ایجاد می‌شود.

**جداول:**

- `users`: حساب‌های کاربری و احراز هویت
- `stress_logs`: ورودی‌های روزانه سطح استرس
- `exercises`: تمرینات موجود
- `sessions`: تاریخچه جلسات تمرین
- `anxiety_tests`: نتایج تست GAD-7
- `anxiety_questions`: سوالات تست اضطراب (قابل مدیریت توسط ادمین)

## پشتیبانی RTL

این برنامه کاملاً با RTL (راست‌به‌چپ) سازگار است:

- تمام ویجت‌ها از جهت چیدمان `Qt.RightToLeft` استفاده می‌کنند
- برچسب‌های فرم در سمت راست ظاهر می‌شوند
- سربرگ‌ها و محتوای جدول RTL هستند
- پشتیبانی فونت فارسی (Vazir/IRANSans با fallback)

## استایل بومی Windows

این برنامه از استایل بومی "windowsvista" Windows برای ظاهر و احساس بومی در Windows استفاده می‌کند.

## کیفیت کد

- **کد فقط انگلیسی**: تمام کد منبع Python به انگلیسی است
- **نوع‌های اشاره‌ای**: حاشیه‌نویسی‌های کامل نوع در سراسر
- **Docstrings**: مستندات جامع
- **مطابق PEP8**: از دستورالعمل‌های سبک Python پیروی می‌کند
- **لاگ‌گیری**: لاگ‌های چرخشی فایل برای اشکال‌زدایی
- **مدیریت خطا**: پیام‌های خطای کاربرپسند (ترجمه شده)

## ویژگی‌های پنل مدیریت

پنل مدیریت ارائه می‌دهد:

- **مدیریت کاربر**: ایجاد، ویرایش، حذف کاربران؛ بازنشانی رمز عبور؛ فعال/غیرفعال کردن حساب‌ها
- **مدیریت تمرین**: عملیات CRUD برای تمرینات
- **مدیریت سوالات اضطراب**: مدیریت سوالات GAD-7
- **مشاهده‌کنندگان جدول**: مرور تمام جداول پایگاه داده
- **عملیات پایگاه داده**: پشتیبان‌گیری، بازیابی و خروجی پایگاه داده

## توسعه

### افزودن ترجمه‌های جدید

1. جفت‌های کلید-مقدار جدید را به `/translations/fa.json` اضافه کنید
2. کلید را در کد استفاده کنید: `tm.t("your_new_key")`

### افزودن صفحه‌های جدید

1. ویجت صفحه را در `/app/ui/screens/` ایجاد کنید
2. به `MainWindow._create_screens()` اضافه کنید
3. دکمه ناوبری را در نوار کناری اضافه کنید

## مجوز

این پروژه همان‌طور که هست برای اهداف آموزشی و توسعه ارائه می‌شود.

## پشتیبانی

برای مشکلات یا سوالات، لطفاً به مستندات کد و نظرات درون خطی مراجعه کنید.
